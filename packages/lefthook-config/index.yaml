# Refer for explanation to following link:
# https://github.com/evilmartians/lefthook
#
# Run the command to test:
#   npx -y lefthook run -v <hook-name>
#
# Examples:
#   npx -y lefthook run -v pre-commit
#   npx -y lefthook run -v commit-msg
#   npx -y lefthook run -v post-merge

extends:
  # ----------------------------------------------------------------
  # pre-commit
  # ----------------------------------------------------------------
  # - packages/lefthook-config/hooks/pre-commit/format/prettier.yaml
  - packages/lefthook-config/hooks/pre-commit/lint/file-extension/yaml.yaml
  - packages/lefthook-config/hooks/pre-commit/lint/file-extension/test.yaml
  - packages/lefthook-config/hooks/pre-commit/lint/file-extension/storybook.yaml
  - packages/lefthook-config/hooks/pre-commit/lint/markdown.yaml
  # ----------------------------------------------------------------
  # commit-msg
  # ----------------------------------------------------------------
  - packages/lefthook-config/hooks/commit-msg/commitlint.yaml
  - packages/lefthook-config/hooks/commit-msg/spell.yaml
  # ----------------------------------------------------------------
  # post-merge
  # ----------------------------------------------------------------
  - packages/lefthook-config/hooks/post-merge/update-node-modules.yaml

pre-commit:
  parallel: true

commit-msg:
  parallel: true

post-merge:
  parallel: true

  commands:
    delete-merged-branches:
      run: git branch --merged | grep -Ev '\*|master|main|dev|develop|development|stag|staging|prod|production' | xargs git branch -d; git fetch --prune;
